<!DOCTYPE html>
<html>
<head>
  <title>Basic Tetris HTML Game</title>
  <meta charset="UTF-8">
  <style>
    html{
      height: 100%;
    }
    body{
      height: 100%;
      background-color: white;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    canvas{
      box-shadow: 2px 2px 7px black;
    }
  </style>
</head>
<body>
<canvas width="320" height="640" id="game"></canvas>
<script>
  const canvas= document.getElementById('game');
  const ctx=canvas.getContext('2d');
  const columns=10;
  const rows=20;
  const lista=['I','J','L','O','S','Z','T'];
  const rand=Math.floor(Math.random()*lista.length);
  const tetrominos = {
  'I': [
    [0,0,0,0],
    [1,1,1,1],
    [0,0,0,0],
    [0,0,0,0]
  ],
  'J': [
    [1,0,0],
    [1,1,1],
    [0,0,0],
  ],
  'L': [
    [0,0,1],
    [1,1,1],
    [0,0,0],
  ],
  'O': [
    [1,1],
    [1,1],
  ],
  'S': [
    [0,1,1],
    [1,1,0],
    [0,0,0],
  ],
  'Z': [
    [1,1,0],
    [0,1,1],
    [0,0,0],
  ],
  'T': [
    [0,1,0],
    [1,1,1],
    [0,0,0],
  ]
};
const colors = {
  'I': 'salmon',
  'O': 'grey',
  'T': 'purple',
  'S': 'green',
  'Z': 'red',
  'J': 'blue',
  'L': 'orange'
};
let right=0;
let down=0;
let playField=[]
function grid(){
  for(let row=0;row<rows;row++){
      for(let col=0;col<columns;col++){
      ctx.fillStyle='white';
      ctx.fillRect(col*32,row*32,32,32);
      ctx.lineWidth=1;
      ctx.strokeStyle='black';
      ctx.strokeRect(col*32,row*32,32,32)
    }
  }
}
function pieces(){
  for(let i=0; i<tetrominos[lista[rand]].length;i++){
    for(let j=0;j<tetrominos[lista[rand]][i].length;j++){
      if(tetrominos[lista[rand]][i][j]!==0){
        ctx.fillStyle=colors[lista[rand]];
        ctx.fillRect(right*32+i*32,down*32+j*32,32,32)
        ctx.lineWidth=1;
        ctx.strokeWidth='white';
        ctx.strokeRect(right*32+i*32,down*32+j*32,32,32);
      }
    }
  }
}
function draw(){
  grid();
  pieces();
}
function update(){
  draw();
  requestAnimationFrame(update)
}
setInterval(()=>{
  down++;
  for(let row=0;row<tetrominos[lista[rand]].length;row++){
    for(let col=0;col<tetrominos[lista[rand]][row].length;col++){
      let cell=tetrominos[lista[rand]][row][col]
      if(cell!==0&&col+down+1>=20){
        down=20-col-1
      }
    }
  }
},1000)
document.addEventListener('keydown',function(e){
  e.preventDefault()
  if(e.key==='d'){
    right++
    ctx.clearRect(0, 0, canvas.width, canvas.height)
    draw()
  }
  if(e.key==='a'){
    right--
    ctx.clearRect(0, 0, canvas.width, canvas.height)
    draw()
  }
  if(e.key==='s'){
    setInterval(()=>{
      down++
      for(let row=0;row<tetrominos[lista[rand]].length;row++){
        for(let col=0;col<tetrominos[lista[rand]][row].length;col++){
          let cell=tetrominos[lista[rand]][row][col]
          if(cell!==0&&col+down+1>=20){
            down=20-col-1
          }
        }
      }
    },50)
  }
})
update()
</script>
</body>
</html>